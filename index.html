<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="description" content="Pixel Word Hunter - TOEIC Edition: Learn 600 business English words with adaptive spaced repetition. Master TOEIC vocabulary through a retro pixel-art quiz game.">
  <title>Pixel Word Hunter</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json">
  <link rel="icon" href="assets/favicon.ico">
  
  <!-- iOS PWA Support -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Word Hunter">
  <link rel="apple-touch-icon" href="assets/logo.png">
  
  <!-- Theme Color -->
  <meta name="theme-color" content="#0a0010">
  
  <!-- Preconnect to critical origins -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.gstatic.com">

  <!-- Preload critical JS bundle -->
  <link rel="preload" href="bundle.js?v=8" as="script" fetchpriority="high">

  <!-- Preload font file for instant text rendering -->
  <link rel="preload" href="https://fonts.gstatic.com/s/pressstart2p/v16/e3t4euO8T-267oIAQAu6jDQyK0nS.ttf" as="font" type="font/ttf" crossorigin fetchpriority="high">
  
  <!-- Preload JSON data -->
  <link rel="preload" href="words_optimized.json" as="fetch" crossorigin>
  
  <!-- Critical CSS - Inlined for fast first paint -->
  <style>
    /* Font face with swap for instant text rendering */
    @font-face {
      font-family: 'Press Start 2P';
      font-style: normal;
      font-weight: 400;
      font-display: swap;
      src: local('Press Start 2P Regular'), local('PressStart2P-Regular'), url('https://fonts.gstatic.com/s/pressstart2p/v16/e3t4euO8T-267oIAQAu6jDQyK0nS.ttf') format('truetype');
    }
    :root {
      --bg-deep:       #0a0010;
      --bg-mid:        #100020;
      --neon-pink:     #ff2d78;
      --neon-cyan:     #00f5ff;
      --neon-purple:   #bf5fff;
      --neon-yellow:   #ffe600;
      --neon-green:    #39ff14;
      --grid-color:    rgba(191, 95, 255, 0.15);
      --text-main:     #f0e6ff;
      --text-dim:      #8877aa;
      --shadow-pink:   0 0 8px #ff2d78, 0 0 20px rgba(255,45,120,0.5);
      --shadow-cyan:   0 0 8px #00f5ff, 0 0 20px rgba(0,245,255,0.5);
      --shadow-purple: 0 0 8px #bf5fff, 0 0 20px rgba(191,95,255,0.5);
      --crt-lines:     repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.18) 2px, rgba(0,0,0,0.18) 4px);
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html, body { height: 100%; width: 100%; overflow: hidden; overscroll-behavior: none; user-select: none; -webkit-user-select: none; font-family: 'Press Start 2P', monospace; background: var(--bg-deep); color: var(--text-main); }
    .game-container { height: 100vh; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; position: relative; overflow: hidden; contain: layout style; }
    .game-container::before { content: ''; position: absolute; inset: 0; background: linear-gradient(rgba(191,95,255,0.07) 1px, transparent 1px), linear-gradient(90deg, rgba(191,95,255,0.07) 1px, transparent 1px); background-size: 40px 40px; transform: perspective(400px) rotateX(45deg) scaleX(1.5); transform-origin: bottom center; z-index: -1; contain: strict; }
    .game-container::after { content: ''; position: absolute; bottom: 0; left: -20%; right: -20%; height: 50%; background: linear-gradient(to top, rgba(255,45,120,0.08) 0%, transparent 100%); z-index: -1; contain: strict; }
    .hidden { display: none !important; }
    .game-title { font-size: clamp(18px, 5vw, 36px); line-height: 1.5; text-align: center; margin-bottom: 18px; letter-spacing: 4px; color: var(--neon-cyan); text-shadow: var(--shadow-cyan); }
    .edition-badge { font-size: 9px; color: var(--neon-purple); text-shadow: var(--shadow-purple); letter-spacing: 6px; margin-bottom: 28px; }
    .stats-line { font-size: 9px; color: var(--neon-green); text-shadow: 0 0 6px var(--neon-green); margin-bottom: 30px; letter-spacing: 2px; }
    .blink { font-size: 10px; color: var(--neon-pink); text-shadow: var(--shadow-pink); margin-bottom: 28px; }
    .start-btn { padding: 16px 36px; font-family: inherit; font-size: 14px; background: transparent; color: var(--neon-pink); border: 2px solid var(--neon-pink); border-radius: 0; cursor: pointer; text-shadow: var(--shadow-pink); box-shadow: 0 0 12px rgba(255,45,120,0.5), inset 0 0 12px rgba(255,45,120,0.08); letter-spacing: 3px; transition: all 0.2s; -webkit-clip-path: polygon(8px 0%, 100% 0%, calc(100% - 8px) 100%, 0% 100%); clip-path: polygon(8px 0%, 100% 0%, calc(100% - 8px) 100%, 0% 100%); position: relative; overflow: hidden; contain: layout style paint; will-change: transform; }
    .reset-button { margin-top: 32px; font-size: 7px; color: var(--text-dim); cursor: pointer; letter-spacing: 2px; transition: color 0.2s; }
    .credits { position: absolute; bottom: 18px; font-size: 7px; color: var(--text-dim); letter-spacing: 2px; }
    body::before { content: ''; position: fixed; inset: 0; background: var(--crt-lines); pointer-events: none; z-index: 9000; animation: crtFlicker 0.6s infinite; contain: strict; will-change: opacity; }
    body::after { content: ''; position: fixed; inset: 0; background: radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,0.75) 100%); pointer-events: none; z-index: 9001; contain: strict; }
    @keyframes crtFlicker { 0%, 96% { opacity: 1; } 97% { opacity: 0.98; } 98% { opacity: 1; } 99% { opacity: 0.96; } 100% { opacity: 1; } }
    @keyframes titlePulse { 0%, 100% { text-shadow: var(--shadow-cyan); color: var(--neon-cyan); } 50% { text-shadow: 0 0 16px #00f5ff, 0 0 40px rgba(0,245,255,0.9), 0 0 60px rgba(0,245,255,0.4); color: #aaffff; } }
    @keyframes blink { 50% { opacity: 0; } }
    .game-title { animation: titlePulse 3s ease-in-out infinite; contain: layout style paint; will-change: text-shadow, color; }
    .edition-badge, .blink { animation: blink 2.5s step-end infinite; contain: layout style paint; will-change: opacity; }
    .blink { animation: blink 1s step-end infinite; }
    /* Settings button */
    .settings-btn { position: absolute; top: 14px; right: 14px; background: transparent; border: 1px solid var(--neon-cyan); color: var(--neon-cyan); font-family: inherit; font-size: 12px; padding: 8px 12px; cursor: pointer; text-shadow: var(--shadow-cyan); box-shadow: 0 0 8px rgba(0,245,255,0.3); transition: all 0.18s; z-index: 100; }
    .settings-btn:hover { background: rgba(0,245,255,0.15); box-shadow: 0 0 16px rgba(0,245,255,0.6); }
    .settings-panel { position: fixed; top: 0; right: -320px; width: 320px; height: 100vh; background: rgba(10, 0, 16, 0.98); border-left: 2px solid var(--neon-cyan); z-index: 1000; padding: 60px 24px 24px; transition: right 0.3s ease; overflow-y: auto; }
    .settings-panel.open { right: 0; }
    .settings-panel-overlay { position: fixed; inset: 0; background: rgba(0, 0, 0, 0.7); z-index: 999; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease; }
    .settings-panel-overlay.open { opacity: 1; visibility: visible; }
    .settings-title { font-size: 12px; color: var(--neon-cyan); text-shadow: var(--shadow-cyan); margin-bottom: 24px; letter-spacing: 3px; text-align: center; }
    .settings-section { margin-bottom: 28px; padding-bottom: 20px; border-bottom: 1px solid rgba(191,95,255,0.3); }
    .settings-section:last-child { border-bottom: none; }
    .settings-label { font-size: 9px; color: var(--neon-purple); text-shadow: var(--shadow-purple); margin-bottom: 12px; display: block; letter-spacing: 2px; }
    .theme-selector { display: flex; flex-direction: column; gap: 10px; }
    .theme-option { display: flex; align-items: center; gap: 12px; padding: 12px; background: rgba(0,0,0,0.5); border: 1px solid var(--text-dim); cursor: pointer; transition: all 0.2s; }
    .theme-option:hover { border-color: var(--neon-cyan); background: rgba(0,245,255,0.1); }
    .theme-option.active { border-color: var(--neon-green); background: rgba(57,255,20,0.1); }
    .theme-preview { width: 32px; height: 32px; border-radius: 4px; border: 1px solid var(--text-dim); }
    .theme-preview.cyberpunk { background: linear-gradient(135deg, #0a0010 0%, #ff2d78 50%, #00f5ff 100%); }
    .theme-preview.matrix { background: linear-gradient(135deg, #000a00 0%, #00ff41 100%); }
    .theme-preview.amber { background: linear-gradient(135deg, #1a0f00 0%, #ffb000 100%); }
    .theme-name { font-size: 10px; color: var(--text-main); }
    .audio-controls { display: flex; flex-direction: column; gap: 16px; }
    .mute-toggle { display: flex; align-items: center; justify-content: space-between; padding: 12px; background: rgba(0,0,0,0.5); border: 1px solid var(--text-dim); cursor: pointer; transition: all 0.2s; }
    .mute-toggle:hover { border-color: var(--neon-cyan); }
    .mute-toggle-label { font-size: 10px; color: var(--text-main); }
    .mute-toggle-icon { font-size: 14px; }
    .volume-slider-container { display: flex; flex-direction: column; gap: 8px; }
    .volume-label { font-size: 9px; color: var(--text-dim); display: flex; justify-content: space-between; }
    .volume-slider { -webkit-appearance: none; appearance: none; width: 100%; height: 6px; background: var(--bg-mid); border: 1px solid var(--neon-purple); outline: none; cursor: pointer; }
    .volume-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; background: var(--neon-cyan); border: none; cursor: pointer; box-shadow: var(--shadow-cyan); }
    .close-settings { position: absolute; top: 14px; right: 14px; background: transparent; border: 1px solid var(--neon-pink); color: var(--neon-pink); font-family: inherit; font-size: 10px; padding: 6px 10px; cursor: pointer; transition: all 0.18s; }
    .close-settings:hover { background: rgba(255,45,120,0.2); box-shadow: 0 0 12px rgba(255,45,120,0.5); }
  </style>
  
  <!-- Non-critical CSS loaded asynchronously -->
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"></noscript>
  <link rel="stylesheet" href="style.css?v=8" media="print" onload="this.media='all'" fetchpriority="high">
  <noscript><link rel="stylesheet" href="style.css?v=8"></noscript>

  <!-- Deferred JS bundle - auto-initializes when loaded -->
  <script src="bundle.js?v=8" defer fetchpriority="high"></script>
</head>
<body>
  <div class="crt-overlay"></div>

  <!-- Settings Panel Overlay -->
  <div id="settings-overlay" class="settings-panel-overlay"></div>
  
  <!-- Settings Panel -->
  <aside id="settings-panel" class="settings-panel">
    <button class="close-settings" onclick="toggleSettings()">âœ•</button>
    <h2 class="settings-title">// SETTINGS //</h2>
    
    <!-- Theme Section -->
    <div class="settings-section">
      <label class="settings-label">COLOR THEME</label>
      <div class="theme-selector">
        <div class="theme-option active" data-theme="cyberpunk" onclick="setTheme('cyberpunk')">
          <div class="theme-preview cyberpunk"></div>
          <span class="theme-name">CYBERPUNK</span>
        </div>
        <div class="theme-option" data-theme="matrix" onclick="setTheme('matrix')">
          <div class="theme-preview matrix"></div>
          <span class="theme-name">MATRIX</span>
        </div>
        <div class="theme-option" data-theme="amber" onclick="setTheme('amber')">
          <div class="theme-preview amber"></div>
          <span class="theme-name">AMBER TERM</span>
        </div>
      </div>
    </div>
    
    <!-- Audio Section -->
    <div class="settings-section">
      <label class="settings-label">AUDIO</label>
      <div class="audio-controls">
        <div class="mute-toggle" onclick="toggleMute()">
          <span class="mute-toggle-label">SOUND EFFECTS</span>
          <span id="mute-icon" class="mute-toggle-icon">ðŸ”Š</span>
        </div>
        <div class="volume-slider-container">
          <div class="volume-label">
            <span>VOLUME</span>
            <span id="volume-value">70%</span>
          </div>
          <input type="range" id="volume-slider" class="volume-slider" min="0" max="100" value="70" oninput="setVolume(this.value)">
        </div>
      </div>
    </div>
  </aside>

  <main role="main">
  <!-- â”€â”€ MENU SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="menu-screen" class="game-container">
    <button class="settings-btn" onclick="toggleSettings()">âš™ SETTINGS</button>
    <h1 class="game-title">
      PIXEL<br>WORD<br>HUNTER
    </h1>
    <div class="edition-badge">// TOEIC EDITION //</div>
    <div class="stats-line">
      MASTERED&nbsp;<span id="mastered-count">0</span>&nbsp;/&nbsp;<span id="total-count">0</span>
    </div>
    <p class="blink">â–¸ PRESS HUNT â—‚</p>
    <button class="start-btn">â–¶&nbsp;HUNT</button>
    <div class="reset-button" onclick="resetProgress()">[ RESET SAVE DATA ]</div>
    <div class="credits">Â© 2026 ALMAZ CORP</div>
  </div>

  <!-- â”€â”€ CATEGORY SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="category-screen" class="game-container hidden">
    <button class="settings-btn" onclick="toggleSettings()">âš™ SETTINGS</button>
    <h2 class="screen-title">// SELECT CATEGORY //</h2>
    <div id="category-list" class="category-grid"></div>
  </div>

  <!-- â”€â”€ GAME SCREEN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div id="game-screen" class="game-container hidden">
    <button class="settings-btn" onclick="toggleSettings()">âš™ SETTINGS</button>
    <header>
      <div class="stat">CAT:&nbsp;<span id="category">ALL</span></div>
      <div class="stat">XP:&nbsp;<span id="xp">0</span></div>
      <button class="exit-btn" onclick="exitGame()">âœ• EXIT</button>
    </header>

    <div id="quiz-box">
      <div class="question-card">
        <h1 id="word"></h1>
      </div>
      <div class="options-grid" id="options"></div>
    </div>

    <div id="explanation-modal" class="modal hidden">
      <h2 class="modal-title">// WORD REVIEW //</h2>
      <div id="explanation-list"></div>
      <button class="next-btn" onclick="nextQuestion()">NEXT&nbsp;â–¶</button>
    </div>

    <div id="feedback" class="hidden"></div>
  </div>
  </main>
</body>
</html>
